/**
 * Advanced Scrolling System - Minified
 * @version 1.0.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AdvancedScrollingSystem=t()}(this,function(){"use strict";class e{constructor(){this.options={},this.sections=[],this.currentSectionIndex=0,this.isScrolling=!1,this.observers=[],this.reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.touchDevice="ontouchstart"in window,this.progressIndicator=null,this.chevronIndicator=null,this.ariaLiveRegion=null,this.preloadedImages=new Set,this.handleScroll=this.throttle(this._handleScroll.bind(this),16),this.handleKeydown=this.handleKeydown.bind(this),this.handleSectionEnter=this.handleSectionEnter.bind(this),this.handleSectionExit=this.handleSectionExit.bind(this)}init(e={}){this.options={sectionSelector:"[data-scroll-section]",imageAttribute:"data-bg-image",mobileImageAttribute:"data-bg-image-mobile",textSelector:"[data-scroll-text]",progressSelector:"[data-scroll-progress]",chevronSelector:"[data-scroll-chevron]",enableKeyboardNav:!0,enableProgressIndicator:!0,enableImageCrossfade:!0,enableTextAnimation:!0,animationDuration:600,staggerDelay:100,preloadAdjacent:!0,...e},this.setupAccessibility(),this.findSections(),this.setupProgressIndicator(),this.setupChevronIndicator(),this.setupIntersectionObserver(),this.setupScrollSnap(),this.preloadImages(),this.bindEvents(),console.log("Advanced Scrolling System initialized with",this.sections.length,"sections")}setupAccessibility(){this.ariaLiveRegion=document.createElement("div"),this.ariaLiveRegion.setAttribute("aria-live","polite"),this.ariaLiveRegion.setAttribute("aria-atomic","true"),this.ariaLiveRegion.className="sr-only",document.body.appendChild(this.ariaLiveRegion);const e=document.querySelectorAll(this.options.sectionSelector);e.forEach((e,t)=>{e.getAttribute("role")||e.setAttribute("role","region"),e.getAttribute("aria-label")||e.setAttribute("aria-label",`Section ${t+1}`),e.setAttribute("tabindex","-1")})}findSections(){this.sections=Array.from(document.querySelectorAll(this.options.sectionSelector)),this.sections.forEach((e,t)=>{const i=e.querySelectorAll(this.options.textSelector);e._textElements=Array.from(i);const s=e.getAttribute(this.options.imageAttribute),o=e.getAttribute(this.options.mobileImageAttribute);e._bgImage=s,e._mobileBgImage=o,e._index=t})}setupProgressIndicator(){this.options.enableProgressIndicator&&(this.progressIndicator=document.querySelector(this.options.progressSelector),this.progressIndicator||(this.progressIndicator=document.createElement("div"),this.progressIndicator.className="scroll-progress-indicator",this.progressIndicator.innerHTML='\n        <div class="scroll-progress-bar" style="\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 0%;\n          height: 3px;\n          background: var(--scroll-progress-color, #3b82f6);\n          z-index: 9999;\n          transition: width 0.3s ease;\n        "></div>\n      ',document.body.appendChild(this.progressIndicator)))}setupChevronIndicator(){this.chevronIndicator=document.querySelector(this.options.chevronSelector),this.chevronIndicator||(this.chevronIndicator=document.createElement("div"),this.chevronIndicator.className="scroll-chevron-indicator",this.chevronIndicator.innerHTML=`\n        <div class="chevron-pulse" style="\n          position: fixed;\n          bottom: 2rem;\n          left: 50%;\n          transform: translateX(-50%);\n          animation: ${this.reducedMotion?"none":"pulse 2s infinite"};\n          opacity: 1;\n          transition: opacity 0.5s ease;\n          z-index: 1000;\n          pointer-events: none;\n        ">\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n            <polyline points="6,9 12,15 18,9"></polyline>\n          </svg>\n        </div>\n      `,document.body.appendChild(this.chevronIndicator))}setupIntersectionObserver(){const e={root:null,rootMargin:"-20% 0px -20% 0px",threshold:.1};this.sectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?this.handleSectionEnter(e.target):this.handleSectionExit(e.target)})},e),this.sections.forEach(e=>{this.sectionObserver.observe(e)})}setupScrollSnap(){(this.touchDevice||this.reducedMotion)&&(document.documentElement.style.scrollSnapType="y mandatory",this.sections.forEach(e=>{e.style.scrollSnapAlign="start"}))}preloadImages(){this.options.preloadAdjacent&&this.sections.forEach((e,t)=>{const i=[e._bgImage,e._mobileBgImage].filter(Boolean);t<=this.currentSectionIndex+1&&t>=this.currentSectionIndex-1&&i.forEach(e=>this.preloadImage(e))})}preloadImage(e){if(!e||this.preloadedImages.has(e))return;const t=new Image;t.onload=()=>this.preloadedImages.add(e),t.src=e}bindEvents(){this.options.enableKeyboardNav&&document.addEventListener("keydown",this.handleKeydown),window.addEventListener("scroll",this.handleScroll,{passive:!0});let e=!1;const t=()=>{e||(e=!0,this.chevronIndicator&&(this.chevronIndicator.style.opacity="0"))};window.addEventListener("scroll",t,{once:!0,passive:!0})}handleKeydown(e){if(this.isScrolling)return;const{key:t}=e;let i=-1;switch(t){case"ArrowDown":case"PageDown":i=Math.min(this.currentSectionIndex+1,this.sections.length-1);break;case"ArrowUp":case"PageUp":i=Math.max(this.currentSectionIndex-1,0);break;case"Home":i=0;break;case"End":i=this.sections.length-1;break;default:return}-1!==i&&i!==this.currentSectionIndex&&(e.preventDefault(),this.scrollToSection(i))}_handleScroll(){this.updateProgress()}handleSectionEnter(e){const t=e._index;this.currentSectionIndex=t,this.ariaLiveRegion&&(this.ariaLiveRegion.textContent=`Entered ${e.getAttribute("aria-label")||`Section ${t+1}`}`),this.options.enableTextAnimation&&!this.reducedMotion&&this.animateTextIn(e._textElements),this.options.enableImageCrossfade&&this.crossfadeImage(e),this.preloadAdjacentImages(t)}handleSectionExit(e){this.options.enableTextAnimation&&!this.reducedMotion&&this.animateTextOut(e._textElements)}animateTextIn(e){e.forEach((e,t)=>{const i=t*this.options.staggerDelay;e.style.transform="translateY(30px)",e.style.opacity="0",e.style.transition=`all ${this.options.animationDuration}ms ease ${i}ms`,requestAnimationFrame(()=>{e.style.transform="translateY(0)",e.style.opacity="1"})})}animateTextOut(e){e.forEach(e=>{e.style.transition=`all ${this.options.animationDuration/2}ms ease`,e.style.transform="translateY(-15px)",e.style.opacity="0"})}crossfadeImage(e){const t=window.innerWidth<768,i=t&&e._mobileBgImage?e._mobileBgImage:e._bgImage;if(!i)return;let s=e.querySelector(".scroll-bg-image");s||(s=document.createElement("div"),s.className="scroll-bg-image",s.style.cssText=`\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-size: cover;\n        background-position: center;\n        opacity: 0;\n        transition: opacity ${this.options.animationDuration}ms ease;\n        z-index: -1;\n      `,e.style.position="relative",e.insertBefore(s,e.firstChild)),this.preloadImage(i),s.style.backgroundImage=`url(${i})`,requestAnimationFrame(()=>{s.style.opacity="1"})}preloadAdjacentImages(e){[e-1,e+1].forEach(e=>{if(e>=0&&e<this.sections.length){const t=this.sections[e];[t._bgImage,t._mobileBgImage].filter(Boolean).forEach(e=>this.preloadImage(e))}})}updateProgress(){if(!this.progressIndicator)return;const e=window.pageYOffset,t=document.documentElement.scrollHeight-window.innerHeight,i=Math.min(Math.max(e/t,0),1),s=this.progressIndicator.querySelector(".scroll-progress-bar");s&&(s.style.width=`${100*i}%`)}scrollToSection(e,t=!0){if(e<0||e>=this.sections.length||this.isScrolling)return;this.isScrolling=!0;const i=this.sections[e];i.scrollIntoView({behavior:t&&!this.reducedMotion?"smooth":"auto",block:"start"}),i.focus({preventScroll:!0}),setTimeout(()=>{this.isScrolling=!1},t?1e3:100)}throttle(e,t){let i;return function(){const s=arguments,o=this;i||(e.apply(o,s),i=!0,setTimeout(()=>i=!1,t))}}destroy(){document.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("scroll",this.handleScroll),this.sectionObserver&&this.sectionObserver.disconnect(),this.ariaLiveRegion&&this.ariaLiveRegion.remove(),this.progressIndicator&&"scroll-progress-indicator"===this.progressIndicator.className&&this.progressIndicator.remove(),this.chevronIndicator&&"scroll-chevron-indicator"===this.chevronIndicator.className&&this.chevronIndicator.remove(),document.documentElement.style.scrollSnapType="",this.sections.forEach(e=>{e.style.scrollSnapAlign="",e.removeAttribute("tabindex")}),console.log("Advanced Scrolling System destroyed")}getCurrentSection(){return this.currentSectionIndex}getSections(){return this.sections}}return"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof window&&(window.AdvancedScrollingSystem=e),e});